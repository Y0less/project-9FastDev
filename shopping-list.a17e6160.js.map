{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-4af1b9908121d13d.js","src/shopping-list-main.js","src/js/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-6a2b112207346476.js","node_modules/@parcel/runtime-js/lib/runtime-b09b022ce9c0a206.js","node_modules/@parcel/runtime-js/lib/runtime-7ebc644c93dd0970.js","node_modules/@parcel/runtime-js/lib/runtime-1dfe5828cf6f0999.js","node_modules/@parcel/runtime-js/lib/runtime-410c3d2a753feb22.js","node_modules/@parcel/runtime-js/lib/runtime-f5991bf08527960d.js","node_modules/@parcel/runtime-js/lib/runtime-739155dd015adc05.js","node_modules/@parcel/runtime-js/lib/runtime-e879478f1fd37a2a.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1QMrX\\\":\\\"shopping-list.a17e6160.js\\\",\\\"34dqz\\\":\\\"mobile.a9653c9a.png\\\",\\\"gNz39\\\":\\\"mobile@2x.a472d73e.png\\\",\\\"jD4zk\\\":\\\"tablet-desck.fed7a1f9.png\\\",\\\"cViWx\\\":\\\"tablet-desck@2x.24f1324d.png\\\",\\\"2VEnG\\\":\\\"amazon.b8fa90cb.png\\\",\\\"8Y5Mm\\\":\\\"apple-books.5a9f17e3.png\\\",\\\"c1l3T\\\":\\\"bookshop.91914384.png\\\",\\\"410VS\\\":\\\"icons.58cb19ae.svg\\\",\\\"1XaNB\\\":\\\"index.d628f063.css\\\",\\\"9FMue\\\":\\\"index.9bee8e8d.js\\\"}\"));","import './js/header.js';\nimport './js/support-ukraine.js';\n\nimport './js/shopping-list.js';\nimport './js/theme.js';\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport booksApiService from './books-service';\nimport { save, load, LOCAL_STORAGE_KEY } from './storage';\nimport mobileImg from '../images/shopping-list/mobile.png';\nimport mobileREtinaImg from '../images/shopping-list/mobile@2x.png';\nimport tabletDeskImg from '../images/shopping-list/tablet-desck.png';\nimport tabletDesckRetinaImg from '../images/shopping-list/tablet-desck@2x.png';\nimport amazonImg from '../images/books-links/amazon.png';\nimport appleImg from '../images/books-links/apple-books.png';\nimport bookshopImg from '../images/books-links/bookshop.png';\nimport sprite from '../images/icons.svg';\n\nconst refs = {\n  listEl: document.querySelector('.js-shopping-list'),\n};\n\nconst savedBooks = load(LOCAL_STORAGE_KEY);\nconst booksId = savedBooks ? savedBooks : [];\n\nif (!booksId.length) {\n  refs.listEl.innerHTML = createDefault();\n} else {\n  getBooks(booksId);\n}\n\nasync function getBooks(ids) {\n  try {\n    const booksPromise = ids.map(id => booksApiService.fetchBookById(id));\n    const result = await Promise.allSettled(booksPromise);\n    const books = result.map(({ value }) => value);\n    const markup = createBooksMarkup(books);\n    refs.listEl.innerHTML = markup;\n    refs.listEl.addEventListener('click', handlerRemove);\n  } catch (error) {\n    Notify.failure('HTTP request failed');\n  }\n}\n\nfunction handlerRemove(e) {\n  const booksId = load(LOCAL_STORAGE_KEY);\n  if (!e.target.closest('.js-remove')) {\n    return;\n  }\n  const id = e.target.closest('[id]').id;\n  refs.listEl.querySelector(`[data-id='${id}']`).remove();\n  const updateBooksId = booksId.filter(bookId => bookId !== id);\n  save(LOCAL_STORAGE_KEY, updateBooksId);\n  if (!load(LOCAL_STORAGE_KEY).length) {\n    refs.listEl.innerHTML = createDefault();\n  }\n}\n\nfunction createBooksMarkup(books) {\n  console.log(books);\n  return books\n    .map(\n      ({\n        _id,\n        book_image,\n        list_name,\n        description,\n        author,\n        buy_links,\n        title,\n      }) => {\n        const amazonLink = buy_links.find(({ name }) =>\n          name.toLowerCase().includes('amazon')\n        ).url;\n        const appleBooksLink = buy_links.find(({ name }) =>\n          name.toLowerCase().includes('apple')\n        ).url;\n        const bookshopLink = buy_links.find(({ name }) =>\n          name.toLowerCase().includes('bookshop')\n        ).url;\n        return `\n     <li data-id=\"${_id}\" class=\"js-book shopping-list-js-book\"><div class=\"shopping-list-book-image-wrapper\"><img src=\"${book_image}\" alt=\"${title}\" class=\"shopping-list-book-image\" width=\"\" height=\"\"/></div><div><h2 class=\"shopping-list-title-book\">${title}</h2><p class=\"shopping-list-list-name\">${list_name}</p><p class=\"shopping-list-description\">${description}</p><div class=\"shopping-list-author-links\"><p class=\"shopping-list-book-author\">${author}</p><ul class=\"shopping-list-links-list\"><li><a href=\"${amazonLink}\" class=\"shopping-list-links-icon-amazon\" target=\"_blank\" rel=\"noreferrer noopener\"><img src=\"${amazonImg}\" alt=\"icon of Amazon\" width=\"\" height=\"\"/></a></li><li><a href=\"${appleBooksLink}\" class=\"shopping-list-links-icon-apple\" target=\"_blank\" rel=\"noreferrer noopener\"><img src=\"${appleImg}\" alt=\"icon of Apple-books\" width=\"\" height=\"\" /></a></li><li><a href=\"${bookshopLink}\" class=\"shopping-list-links-icon\" target=\"_blank\" rel=\"noreferrer noopener\"><img src=\"${bookshopImg}\" alt=\"icon of bookshop\" width=\"\" height=\"\" /></a></li></ul></div><button id=${_id} class=\"js-remove shopping-list-btn-remove\" type= \"button\"><svg class=\"icon-remove shopping-list-icon-remove\" width=\"18px\" height=\"18px\"><use href=\"${sprite}#icon-dump\"></use></svg></button></div></li>`;\n      }\n    )\n    .join('');\n}\n\nfunction createDefault() {\n  return `<div class=\"shopping-list-default\"><p class=\"shopping-list-default-message\">This page is empty, add some books and proceed to order.</p><picture><source\n          srcset=\"${tabletDeskImg} 1x, ${tabletDesckRetinaImg} 2x\"\n          media=\"(min-width: 768px)\"\n        />\n        <source\n          srcset=\"\n            ${mobileImg}   1x,\n            ${mobileREtinaImg} 2x\n          \"\n          media=\"(min-width: 320px)\"\n        />\n        <img\n          src=\"${mobileImg}\"\n          class=\"shopping-list-default-picture\"\n          alt=\"stack of books\"\n          width=\"265\"\n          height=\"198\"\n        />\n      </picture>\n          </div>`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"34dqz\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"gNz39\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"jD4zk\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"cViWx\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"2VEnG\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"8Y5Mm\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"c1l3T\");","module.exports = require('./helpers/bundle-url').getBundleURL('1QMrX') + require('./helpers/bundle-manifest').resolve(\"410VS\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$afa3e3fe6caa4f34$exports","getBundleURL","resolve","$34299712ea4d6510$exports","$4cfb047ce74129eb$exports","$10f20b7fd6af5d1e$exports","$6b289717b96a4fde$exports","$8c9f8893d7b0bab7$exports","$93105098a14adf26$exports","$f290e28811632114$exports","$399cd7aec2522034$var$refs","listEl","document","querySelector","$399cd7aec2522034$var$savedBooks","$jzQFI","load","LOCAL_STORAGE_KEY","$399cd7aec2522034$var$booksId","$399cd7aec2522034$var$_getBooks","$parcel$interopDefault","$2TvXO","mark","_callee","ids","booksPromise","result","books","markup","map","$46hgj","default","fetchBookById","Promise","allSettled","_ctx","sent","param","$399cd7aec2522034$var$createBooksMarkup","innerHTML","addEventListener","$399cd7aec2522034$var$handlerRemove","$h6c0i","Notify","failure","apply","this","arguments","e","booksId1","target","closest","concat","remove","updateBooksId","filter","bookId","save","$399cd7aec2522034$var$createDefault","console","log","param1","_id","book_image","list_name","description","author","buy_links","title","amazonLink","find","name","toLowerCase","includes","appleBooksLink","bookshopLink","join","$399cd7aec2522034$var$getBooks"],"version":3,"file":"shopping-list.a17e6160.js.map"}