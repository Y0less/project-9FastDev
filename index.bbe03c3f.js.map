{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-2e0ced221e56d932.js","src/index.js","src/js/all-categories.js","src/js/home.js","src/js/pop-up.js","src/js/handle-book-click.js","node_modules/@parcel/runtime-js/lib/runtime-1736b829404e1ab2.js","src/js/save-book-id.js","src/js/scroll-up.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.bbe03c3f.js\\\",\\\"259VH\\\":\\\"default-mobile-book-cover.eaf37d8e.png\\\",\\\"1XaNB\\\":\\\"index.2823627f.css\\\",\\\"hE9ny\\\":\\\"index.f9f53d1b.js\\\"}\"));","import './js/header.js';\nimport './js/all-categories.js';\nimport './js/support-ukraine.js';\nimport './js/home.js';\n\nimport './js/pop-up.js';\nimport './js/theme.js';\nimport './js/handle-book-click.js';\nimport './js/login-modal.js';\nimport './js/save-book-id.js';\n\nimport './js/scroll-up';\n\nimport './js/loader.js';\n\ndocument.querySelector('.js-home-page').classList.add('active-page');\ndocument.querySelector('.js-home-page-mobile').classList.add('active-page');\n","import booksApiService from './books-service';\nimport loadingToogle from './loader';\n// use methods booksApiService.fetchCategoryList(), booksApiService.fetchTopBooks(),booksApiService.fetchCategory(category), booksApiService.fetchBookById(bookId) for HTTP-requests\n\nimport {\n  categoriesTitle,\n  createMarkupBookGroup,\n  createMarkupTopBooks,\n  topBooksList,\n} from './home';\nconst param = {\n  categoriesSection: document.querySelector('.all-categories'),\n  bookCategoriesList: document.querySelector('.all-categories-list'),\n  bookCategory: document.querySelector('.category'),\n};\nexport const { categoriesSection, bookCategoriesList, bookCategory } = param;\n\n// fetch for all book categories  for sidebar\nasync function fetchCategories() {\n  let data = null;\n  try {\n    data = await booksApiService.fetchCategoryList();\n    // createMarkupBookCategory(data);\n  } catch (error) {\n    console.log(error);\n  }\n  return data;\n}\n\n// markup for all categories list in sidebar\n\nasync function createMarkupBookCategory() {\n  const bookCategories = await fetchCategories();\n  const sortedCategories = bookCategories.sort((a, b) =>\n    a.list_name.localeCompare(b.list_name)\n  );\n  const arrForMarkup = sortedCategories.map(\n    ({ list_name: bookCategoryName }) => {\n      return `<li id=\"${bookCategoryName}\" class=\"category\">${bookCategoryName}</li>`;\n    }\n  );\n  bookCategoriesList.innerHTML = arrForMarkup.join(' ');\n}\ncreateMarkupBookCategory();\n\n//function for add event listener for click on book category in sidebar\ncategoriesSection.addEventListener('click', selectMarkupBookGroup);\n\n// fetch for all book in  category\nasync function fetchBooksOfCategory(targetCategory) {\n  let data = null;\n  try {\n    data = await booksApiService.fetchCategory(targetCategory);\n  } catch (error) {\n    console.log(error);\n  }\n  return data;\n}\n\nasync function selectMarkupBookGroup(evt) {\n  if (evt.target.className === 'category') {\n    topBooksList.innerHTML = '';\n    loadingToogle();\n    categoriesTitle.classList.remove('chosen-category');\n    const listGroups = [...bookCategoriesList.children];\n    listGroups.forEach(elem => {\n      if (elem.classList.contains('chosen-category')) {\n        elem.classList.remove('chosen-category');\n      }\n    });\n\n    evt.target.classList.add('chosen-category');\n    const category = evt.target.textContent;\n    const booksOfCategory = await fetchBooksOfCategory(category);\n    createMarkupBookGroup(booksOfCategory, category);\n    loadingToogle();\n  } else if (evt.target.className === 'all-categories-title') {\n    topBooksList.classList.replace('category-book-page', 'best-books');\n    topBooksList.innerHTML = '';\n    loadingToogle();\n    createMarkupTopBooks();\n    loadingToogle();\n  }\n}\n","import booksApiService from './books-service';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport loadingToogle from './loader';\n// use methods booksApiService.fetchCategoryList(), booksApiService.fetchTopBooks(),booksApiService.fetchCategory(category), booksApiService.fetchBookById(bookId) for HTTP-requests\nconst param = {\n  topBooksList: document.querySelector('.best-books'),\n  mainPage: document.querySelector('.main-content'),\n  categoriesTitle: document.querySelector('.all-categories-title'),\n};\nexport const { topBooksList, mainPage, categoriesTitle } = param;\n\n// fetch data Top Books  for main page\nasync function fetchBooks() {\n  let data = null;\n  try {\n    data = await booksApiService.fetchTopBooks();\n  } catch (error) {\n    fetchError(error);\n  }\n  return data;\n}\n\n// markup for Top Books lists on main page\n\nexport async function createMarkupTopBooks() {\n  loadingToogle();\n  categoriesTitle.classList.add('chosen-category');\n  const bookCategoriesList = document.querySelector('.all-categories-list');\n  const listGroups = [...bookCategoriesList.children];\n  listGroups.forEach(elem => {\n    if (elem.classList.contains('chosen-category')) {\n      elem.classList.remove('chosen-category');\n    }\n  });\n\n  const arrTopBooks = await fetchBooks();\n  const homeHeder = document.querySelector('.home-title');\n  homeHeder.remove();\n\n  const string = `<h1 class=\"home-title\">\n      Best Sellers <span class=\"home-title-part\"> Books </span>\n    </h1>`;\n  mainPage.insertAdjacentHTML('afterbegin', string);\n  createMarkupBookCategories(arrTopBooks, createMarkupBooksList);\n\n  addEventListenerForBTN();\n  loadingToogle();\n}\ncreateMarkupTopBooks();\n\nfunction addEventListenerForBTN() {\n  const buttons = document.querySelectorAll('.best-books-btn');\n  buttons.forEach(btn => btn.addEventListener('click', handleBtnClick));\n}\nfunction createMarkupBooksList(bookslist) {\n  const markupBooks = bookslist.map(({ author, book_image, title, _id }) => {\n    return ` <li id=\"${_id}\" class=\"js-book best-books-link\">\n  <div class=\"book-image\">\n    <img class=\"best-book-icon\" src=\"${book_image}\" alt=\"${title}\" />\n    <div class=\"overlay\">\n      <p class=\"overlay-text\">quick view</p>\n    </div>\n  </div>\n  <div class=\"book-text\">\n    <h3 class=\"best-book-title\">${title}</h3>\n    <p class=\"best-book-author\">${author}</p>\n  </div>\n</li>`;\n  });\n  return markupBooks.join(' ');\n}\n// const image = imageFromBack ? imageFromBack : defaultImage;\n\nfunction createMarkupBookCategories(bookCategories, callback) {\n  const arrForMarkup = bookCategories.map(({ books, list_name }) => {\n    const markupCategories = `  <div class=\"best-books-sections\">\n            <h2 class=\"best-books-heder\">${list_name}</h2>\n            <ul class=\"best-books-list\">\n                      ${callback(books)}\n            </ul>\n            <button type=\"submit\" id=\"${list_name}\" class=\"best-books-btn\">SEE MORE</button>\n          </div>`;\n\n    return markupCategories;\n  });\n  topBooksList.innerHTML = arrForMarkup.join(' ');\n}\n\n//function for add event listener for click button SEE MORE\n\nasync function handleBtnClick(evt) {\n  loadingToogle();\n  pagePosition();\n\n  const books = await fetchTargetCategory(evt);\n  stylizeCategoriesList(evt);\n  createBestsellersPage(books, evt);\n  loadingToogle();\n}\n\nfunction pagePosition() {\n  window.scrollTo(0, 0);\n}\n\nasync function fetchTargetCategory(event) {\n  let data = null;\n  topBooksList.innerHTML = '';\n  try {\n    const targetCategory = event.target.id;\n    data = await booksApiService.fetchCategory(targetCategory);\n  } catch (error) {\n    fetchError(error);\n  }\n  return data;\n}\nfunction stylizeCategoriesList(event) {\n  const targetCategory = event.target.id;\n  categoriesTitle.classList.remove('chosen-category');\n  const bookCategoriesList = document.querySelector('.all-categories-list');\n  const listGroups = [...bookCategoriesList.children];\n  const stylingCategory = listGroups.find(elem => elem.id === targetCategory);\n  stylingCategory.classList.add('chosen-category');\n}\nfunction createBestsellersPage(booklist, event) {\n  if (booklist) {\n    const targetCategory = event.target.id;\n    createMarkupBookGroup(booklist, targetCategory);\n  }\n}\n\n// markup for  list books of category  on main page\n\nexport function createMarkupBookGroup(data, groupName) {\n  changePageTitle(groupName);\n  createBookGroupPage(data);\n  changeBooksPositioning();\n}\n\nfunction changePageTitle(newtitle) {\n  const partsForTitle = separateTitle(newtitle);\n  const homeHeder = document.querySelector('.home-title');\n  homeHeder.remove();\n\n  const string = `<h1 class=\"home-title\">\n      ${partsForTitle[0]} <span class=\"home-title-part\"> ${partsForTitle[1]} </span>\n    </h1>`;\n  mainPage.insertAdjacentHTML('afterbegin', string);\n}\n\nfunction separateTitle(title) {\n  const titleArr = title.split(' ');\n  const arrForGroupTitle = [];\n  if (titleArr.length > 1) {\n    arrForGroupTitle.push(titleArr.splice(titleArr.length - 1, 1).join(''));\n  }\n  arrForGroupTitle.unshift(titleArr.join(' '));\n  return arrForGroupTitle;\n}\n\nfunction changeBooksPositioning() {\n  topBooksList.classList.replace('best-books', 'category-book-page');\n}\n\nfunction createBookGroupPage(books) {\n  const markup = books.map(({ author, book_image, title, _id }) => {\n    return `<li id=\"${_id}\" class=\"js-book group-book-link\">\n  <div class=\"book-image\">\n    <img class=\"group-book-icon\" src=\"${book_image}\" alt=\"${title}\" />\n    <div class=\"overlay\">\n      <p class=\"overlay-text\">quick view</p>\n    </div>\n  </div>\n  <div class=\"book-text\">\n    <h4 class=\"group-book-title\">${title}</h4>\n    <p class=\"group-book-author\">${author}</p>\n  </div>\n</li>`;\n  });\n  topBooksList.innerHTML = markup.join(' ');\n}\n\n// function show error\nfunction fetchError(error) {\n  mainPage.innerHTML = '';\n\n  Notify.failure(\n    'OOPS!!! Something went wrong! Try reloading the page or select another BOOK CATEGORY!!!',\n    {\n      position: 'center-center',\n      timeout: 3000,\n      width: '400px',\n      fontSize: '24px',\n    }\n  );\n}\n","import { save, load, remove } from './storage';\nimport booksApiService from './books-service';\n\n// Use methods booksApiService.fetchCategoryList(), booksApiService.fetchTopBooks(),booksApiService.fetchCategory(category), booksApiService.fetchBookById(bookId) for HTTP-requests\n","//обробити помилку запиту\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport booksApiService from './books-service';\nimport { LOCAL_STORAGE_KEY, load } from './storage';\nimport defaultBookImg from '../images/default-book-cover/default-mobile-book-cover.png';\n\nconst refs = {\n  booksList: document.querySelector('.js-books-list'),\n  backdrop: document.querySelector('.js-backdrop'),\n  modalWin: document.querySelector('.js-modal-window'),\n  closeModalBtn: document.querySelector('.js-modal-window-close-btn'),\n};\n\nrefs.booksList.addEventListener('click', onBookClick);\n\nasync function onBookClick(e) {\n  const targetBook = e.target.closest('.js-book');\n\n  if (!targetBook) {\n    return;\n  }\n\n  const targetBookId = targetBook.id;\n\n  try {\n    const book = await booksApiService.fetchBookById(targetBookId);\n    populateModalWin(book, refs.modalWin);\n    changeButton(targetBookId);\n    showModalWin(refs.backdrop);\n  } catch (error) {\n    Notify.failure('HTTP request failed');\n  }\n}\n\nfunction populateModalWin(book, modalWin) {\n  const {\n    title,\n    author,\n    description,\n    book_image: bookImg,\n    buy_links: buyLinks,\n    _id: id,\n  } = book;\n  const bookImage = modalWin.querySelector('img');\n  const bookTitle = modalWin.querySelector('.modal-book-title');\n  const bookAuthor = modalWin.querySelector('.modal-book-author');\n  const bookDescription = modalWin.querySelector('.modal-book-description');\n  const shopLinks = modalWin.querySelectorAll('a');\n  const addBtn = modalWin.querySelectorAll('.js-modal-btn');\n  bookImage.src = bookImg ? bookImg : defaultBookImg;\n  bookImage.alt = title;\n  bookTitle.textContent = title;\n  bookAuthor.textContent = author;\n  bookDescription.textContent = description\n    ? description\n    : 'book description missing';\n  shopLinks.forEach(link => {\n    const shopLink = buyLinks.find(({ name }) =>\n      name.toLowerCase().includes(link.id)\n    ).url;\n    link.href = shopLink;\n  });\n  addBtn.forEach(btn => {\n    btn.id = id;\n  });\n}\n\nfunction showModalWin(element) {\n  element.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscPress);\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  refs.closeModalBtn.addEventListener('click', onCloseModalBtnClick);\n}\n\nfunction onCloseModalBtnClick() {\n  refs.backdrop.classList.add('is-hidden');\n  document.body.style.overflow = '';\n  document.removeEventListener('keydown', onEscPress);\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModalBtnClick();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onCloseModalBtnClick();\n  }\n}\n\nfunction changeButton(bookId) {\n  const savedBooksId = load(LOCAL_STORAGE_KEY) ? load(LOCAL_STORAGE_KEY) : [];\n  if (!savedBooksId.length) {\n    return;\n  }\n  const isBookIdInLocalStorage = savedBooksId.some(id => id === bookId);\n  if (isBookIdInLocalStorage) {\n    hideAddToLSButton();\n    return;\n  }\n  showAddToLSButton();\n}\n\nfunction hideAddToLSButton() {\n  document.querySelector('.js-add-btn').style.display = 'none';\n  document.querySelector('.js-remove-btn').style.display = 'block';\n  document.querySelector('.js-modal-desc-text').style.display = 'block';\n}\n\nfunction showAddToLSButton() {\n  document.querySelector('.js-remove-btn').style.display = 'none';\n  document.querySelector('.js-add-btn').style.display = 'block';\n  document.querySelector('.js-modal-desc-text').style.display = 'none';\n}\n\nexport { hideAddToLSButton, showAddToLSButton };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"259VH\")).toString();","import { hideAddToLSButton, showAddToLSButton } from './handle-book-click';\nimport { LOCAL_STORAGE_KEY, load, save } from './storage';\n\nconst refs = {\n  actionLSBtn: document.querySelector('.js-modal-buttons'),\n};\n\nrefs.actionLSBtn.addEventListener('click', onActionLSBtnClick);\n\nfunction onActionLSBtnClick(e) {\n  const savedBooksId = load(LOCAL_STORAGE_KEY);\n  const booksId = savedBooksId ? savedBooksId : [];\n  const targetId = e.target.id;\n  let booksIdForSave = null;\n  const isBookIdInLocalStorage = booksId.some(id => id === targetId);\n  if (isBookIdInLocalStorage) {\n    booksIdForSave = booksId.filter(id => id !== targetId);\n    showAddToLSButton();\n  } else {\n    booksIdForSave = [...booksId, targetId];\n    hideAddToLSButton();\n  }\n\n  save(LOCAL_STORAGE_KEY, booksIdForSave);\n}\n","const btnUpEl = document.querySelector('.btnUp');\nbtnUpEl.addEventListener('click', goTop);\nwindow.addEventListener('scroll', trackScroll);\nfunction trackScroll() {\n  const offset = window.scrollY;\n  const cords = document.documentElement.clientHeight;\n  if (offset > cords) {\n    btnUpEl.classList.add('show');\n  } else {\n    btnUpEl.classList.remove('show');\n  }\n}\nfunction goTop() {\n  if (window.scrollY > 0) {\n    window.scrollBy(0, -75);\n    setTimeout(goTop, 0);\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$e7MOj","$7a8fb0f659835779$var$param","topBooksList","document","querySelector","mainPage","categoriesTitle","$7a8fb0f659835779$export$48d8c770eef7ba65","$7a8fb0f659835779$export$bb398f9cbb2bdc79","$7a8fb0f659835779$export$8f88c4694595f132","async","$7a8fb0f659835779$export$e38a5a979695b36c","$gjiCh","default","classList","add","children","forEach","elem","contains","remove","arrTopBooks","data","fetchTopBooks","error","$7a8fb0f659835779$var$fetchError","$7a8fb0f659835779$var$fetchBooks","insertAdjacentHTML","bookCategories","callback","arrForMarkup","map","books","list_name","innerHTML","join","$7a8fb0f659835779$var$createMarkupBookCategories","$7a8fb0f659835779$var$createMarkupBooksList","querySelectorAll","btn","addEventListener","$7a8fb0f659835779$var$handleBtnClick","bookslist","author","book_image","title","_id","evt","window","scrollTo","event","targetCategory","target","id","fetchCategory","$7a8fb0f659835779$var$fetchTargetCategory","listGroups","find","$7a8fb0f659835779$var$stylizeCategoriesList","booklist","$7a8fb0f659835779$export$c83105fe440cac4c","$7a8fb0f659835779$var$createBestsellersPage","groupName","newtitle","partsForTitle","titleArr","split","arrForGroupTitle","length","push","splice","unshift","$7a8fb0f659835779$var$separateTitle","string","$7a8fb0f659835779$var$changePageTitle","markup","$7a8fb0f659835779$var$createBookGroupPage","replace","$iQIUW","Notify","failure","position","timeout","width","fontSize","$7b4e7d52f62ed64d$var$param","categoriesSection","bookCategoriesList","bookCategory","$7b4e7d52f62ed64d$export$7ea7d725a6341e21","$7b4e7d52f62ed64d$export$97c2b23beb3d1a8","$7b4e7d52f62ed64d$export$887bdbb623933d28","fetchCategoryList","console","log","$7b4e7d52f62ed64d$var$fetchCategories","sort","a","b","localeCompare","bookCategoryName","$7b4e7d52f62ed64d$var$createMarkupBookCategory","className","category","textContent","$7b4e7d52f62ed64d$var$fetchBooksOfCategory","$6acfbfef39263e0a$exports","URL","resolve","import","meta","url","toString","$b567edec1ad8bdfc$var$refs","booksList","backdrop","modalWin","closeModalBtn","$b567edec1ad8bdfc$var$onCloseModalBtnClick","body","style","overflow","removeEventListener","$b567edec1ad8bdfc$var$onEscPress","$b567edec1ad8bdfc$var$onBackdropClick","e","currentTarget","code","$b567edec1ad8bdfc$export$af0a88fa7b2fe098","display","$b567edec1ad8bdfc$export$c33f63469693c2ae","targetBook","closest","targetBookId","book","description","bookImg","buy_links","buyLinks","bookImage","bookTitle","bookAuthor","bookDescription","shopLinks","addBtn","src","$parcel$interopDefault","alt","link","shopLink","name","toLowerCase","includes","href","$b567edec1ad8bdfc$var$populateModalWin","fetchBookById","bookId","savedBooksId","$5uEKZ","load","LOCAL_STORAGE_KEY","some","$b567edec1ad8bdfc$var$changeButton","actionLSBtn","booksId","targetId","booksIdForSave","filter","save","$52650fc44c8b8200$var$btnUpEl","$52650fc44c8b8200$var$goTop","scrollY","scrollBy","setTimeout","offset","cords","documentElement","clientHeight"],"version":3,"file":"index.bbe03c3f.js.map"}