function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){n[e]=t},t.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.bbe03c3f.js","259VH":"default-mobile-book-cover.eaf37d8e.png","1XaNB":"index.2823627f.css","hE9ny":"index.f9f53d1b.js"}')),s("bUb57");var c=s("e7MOj"),i=s("gjiCh"),a=(c=s("e7MOj"),s("iQIUW"));i=s("gjiCh");const l={topBooksList:document.querySelector(".best-books"),mainPage:document.querySelector(".main-content"),categoriesTitle:document.querySelector(".all-categories-title")},{topBooksList:r,mainPage:d,categoriesTitle:u}=l;async function y(){(0,i.default)(),u.classList.add("chosen-category");[...document.querySelector(".all-categories-list").children].forEach((e=>{e.classList.contains("chosen-category")&&e.classList.remove("chosen-category")}));const e=await async function(){let e=null;try{e=await c.default.fetchTopBooks()}catch(e){g(e)}return e}();document.querySelector(".home-title").remove();d.insertAdjacentHTML("afterbegin",'<h1 class="home-title">\n      Best Sellers <span class="home-title-part"> Books </span>\n    </h1>'),function(e,t){const o=e.map((({books:e,list_name:o})=>`  <div class="best-books-sections">\n            <h2 class="best-books-heder">${o}</h2>\n            <ul class="best-books-list">\n                      ${t(e)}\n            </ul>\n            <button type="submit" id="${o}" class="best-books-btn">SEE MORE</button>\n          </div>`));r.innerHTML=o.join(" ")}(e,m),document.querySelectorAll(".best-books-btn").forEach((e=>e.addEventListener("click",b))),(0,i.default)()}function m(e){return e.map((({author:e,book_image:t,title:o,_id:n})=>` <li id="${n}" class="js-book best-books-link">\n  <div class="book-image">\n    <img class="best-book-icon" src="${t}" alt="${o}" />\n    <div class="overlay">\n      <p class="overlay-text">quick view</p>\n    </div>\n  </div>\n  <div class="book-text">\n    <h3 class="best-book-title">${o}</h3>\n    <p class="best-book-author">${e}</p>\n  </div>\n</li>`)).join(" ")}async function b(e){(0,i.default)(),window.scrollTo(0,0);const t=await async function(e){let t=null;r.innerHTML="";try{const o=e.target.id;t=await c.default.fetchCategory(o)}catch(e){g(e)}return t}(e);!function(e){const t=e.target.id;u.classList.remove("chosen-category");const o=[...document.querySelector(".all-categories-list").children];o.find((e=>e.id===t)).classList.add("chosen-category")}(e),function(e,t){if(e){f(e,t.target.id)}}(t,e),(0,i.default)()}function f(e,t){!function(e){const t=function(e){const t=e.split(" "),o=[];t.length>1&&o.push(t.splice(t.length-1,1).join(""));return o.unshift(t.join(" ")),o}(e);document.querySelector(".home-title").remove();const o=`<h1 class="home-title">\n      ${t[0]} <span class="home-title-part"> ${t[1]} </span>\n    </h1>`;d.insertAdjacentHTML("afterbegin",o)}(t),function(e){const t=e.map((({author:e,book_image:t,title:o,_id:n})=>`<li id="${n}" class="js-book group-book-link">\n  <div class="book-image">\n    <img class="group-book-icon" src="${t}" alt="${o}" />\n    <div class="overlay">\n      <p class="overlay-text">quick view</p>\n    </div>\n  </div>\n  <div class="book-text">\n    <h4 class="group-book-title">${o}</h4>\n    <p class="group-book-author">${e}</p>\n  </div>\n</li>`));r.innerHTML=t.join(" ")}(e),r.classList.replace("best-books","category-book-page")}function g(e){d.innerHTML="",a.Notify.failure("OOPS!!! Something went wrong! Try reloading the page or select another BOOK CATEGORY!!!",{position:"center-center",timeout:3e3,width:"400px",fontSize:"24px"})}y();const h={categoriesSection:document.querySelector(".all-categories"),bookCategoriesList:document.querySelector(".all-categories-list"),bookCategory:document.querySelector(".category")},{categoriesSection:p,bookCategoriesList:k,bookCategory:v}=h;!async function(){const e=(await async function(){let e=null;try{e=await c.default.fetchCategoryList()}catch(e){console.log(e)}return e}()).sort(((e,t)=>e.list_name.localeCompare(t.list_name))).map((({list_name:e})=>`<li id="${e}" class="category">${e}</li>`));k.innerHTML=e.join(" ")}(),p.addEventListener("click",(async function(e){if("category"===e.target.className){r.innerHTML="",(0,i.default)(),u.classList.remove("chosen-category");[...k.children].forEach((e=>{e.classList.contains("chosen-category")&&e.classList.remove("chosen-category")})),e.target.classList.add("chosen-category");const t=e.target.textContent;f(await async function(e){let t=null;try{t=await c.default.fetchCategory(e)}catch(e){console.log(e)}return t}(t),t),(0,i.default)()}else"all-categories-title"===e.target.className&&(r.classList.replace("category-book-page","best-books"),r.innerHTML="",(0,i.default)(),y(),(0,i.default)())})),s("75VGX"),s("5uEKZ"),s("e7MOj"),s("4S0r6");a=s("iQIUW"),c=s("e7MOj");var L,S=s("5uEKZ");L=new URL(s("kyEFX").resolve("259VH"),import.meta.url).toString();const w={booksList:document.querySelector(".js-books-list"),backdrop:document.querySelector(".js-backdrop"),modalWin:document.querySelector(".js-modal-window"),closeModalBtn:document.querySelector(".js-modal-window-close-btn")};function E(){w.backdrop.classList.add("is-hidden"),document.body.style.overflow="",document.removeEventListener("keydown",j),w.backdrop.removeEventListener("click",q)}function q(e){e.currentTarget===e.target&&E()}function j(e){"Escape"===e.code&&E()}function _(){document.querySelector(".js-add-btn").style.display="none",document.querySelector(".js-remove-btn").style.display="block",document.querySelector(".js-modal-desc-text").style.display="block"}function T(){document.querySelector(".js-remove-btn").style.display="none",document.querySelector(".js-add-btn").style.display="block",document.querySelector(".js-modal-desc-text").style.display="none"}w.booksList.addEventListener("click",(async function(t){const o=t.target.closest(".js-book");if(!o)return;const n=o.id;try{!function(t,o){const{title:n,author:s,description:c,book_image:i,buy_links:a,_id:l}=t,r=o.querySelector("img"),d=o.querySelector(".modal-book-title"),u=o.querySelector(".modal-book-author"),y=o.querySelector(".modal-book-description"),m=o.querySelectorAll("a"),b=o.querySelectorAll(".js-modal-btn");r.src=i||e(L),r.alt=n,d.textContent=n,u.textContent=s,y.textContent=c||"book description missing",m.forEach((e=>{const t=a.find((({name:t})=>t.toLowerCase().includes(e.id))).url;e.href=t})),b.forEach((e=>{e.id=l}))}(await c.default.fetchBookById(n),w.modalWin),function(e){const t=(0,S.load)(S.LOCAL_STORAGE_KEY)?(0,S.load)(S.LOCAL_STORAGE_KEY):[];if(!t.length)return;if(t.some((t=>t===e)))return void _();T()}(n),w.backdrop.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.addEventListener("keydown",j),w.backdrop.addEventListener("click",q),w.closeModalBtn.addEventListener("click",E)}catch(e){a.Notify.failure("HTTP request failed")}})),s("gY4QW");S=s("5uEKZ");({actionLSBtn:document.querySelector(".js-modal-buttons")}).actionLSBtn.addEventListener("click",(function(e){const t=(0,S.load)(S.LOCAL_STORAGE_KEY),o=t||[],n=e.target.id;let s=null;o.some((e=>e===n))?(s=o.filter((e=>e!==n)),T()):(s=[...o,n],_());(0,S.save)(S.LOCAL_STORAGE_KEY,s)}));const C=document.querySelector(".btnUp");C.addEventListener("click",(function e(){window.scrollY>0&&(window.scrollBy(0,-75),setTimeout(e,0))})),window.addEventListener("scroll",(function(){const e=window.scrollY,t=document.documentElement.clientHeight;e>t?C.classList.add("show"):C.classList.remove("show")})),s("gjiCh"),document.querySelector(".js-home-page").classList.add("active-page"),document.querySelector(".js-home-page-mobile").classList.add("active-page");
//# sourceMappingURL=index.bbe03c3f.js.map
